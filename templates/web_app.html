{% extends "base.html" %}

{% block title %}Hotel App ‚Äì {{ role_title }}{% endblock %}

{% block head_extra %}
  <link rel="stylesheet" href="/static/hotel-webapp.css" />
  <script defer src="/static/hotel-webapp.js"></script>
{% endblock %}

{% block content %}
<div
  class="webapp-shell"
  data-webapp
  data-role="{{ role_key }}"
  data-device-class="{{ device_class }}"
  data-rooms='{{ rooms | tojson }}'
>
  <div class="webapp-wrap webapp-grid">
    <div class="webapp-card sticky webapp-card--header">
      <div class="webapp-header">
        <div class="webapp-title">
          <img
            src="{{ url_for('static', path='brand/hotel-logo.svg') }}"
            alt="ASC Hotel Chodov"
            style="width:44px;height:44px;object-fit:contain;"
          />
          <div>
            <h1>ASC Hotel Chodov</h1>
            <p>Intern√≠ hl√°≈°en√≠ ‚Ä¢ Pokojsk√° / Recepce / √ödr≈æba / Sn√≠danƒõ</p>
          </div>
        </div>
        <span class="role-chip">{{ role_title }}</span>
      </div>

      <div class="webapp-actions webapp-header-actions">
        <a class="webapp-button ghost" href="/">Zpƒõt na √∫vod</a>
        <a class="webapp-button primary" href="/download/app.apk" download style="text-decoration:none;">üì• APK (Android)</a>
      </div>
    </div>

    <div class="webapp-card" data-action-area>
      {% if role_key == 'housekeeping' %}
      <h2>Nov√© hl√°≈°en√≠</h2>
      <p class="webapp-muted">Vyfo≈•te n√°lez nebo z√°vadu a p≈ôi≈ôaƒète pokoj.</p>
      <form class="form-grid" data-housekeeping-form>
        <div>
          <label class="label">Typ hl√°≈°en√≠</label>
          <div class="form-row">
            <label class="webapp-button ghost">
              <input type="radio" name="type" value="FIND" data-report-type checked />
              N√°lez
            </label>
            <label class="webapp-button ghost">
              <input type="radio" name="type" value="ISSUE" data-report-type />
              Z√°vada
            </label>
          </div>
        </div>

        <div>
          <label class="label">Fotografie (nepovinn√©)</label>
          <div class="photo-actions-mobile">
            <button type="button" class="webapp-button primary" data-photo-camera-btn>Vyfotit</button>
            <button type="button" class="webapp-button ghost" data-photo-gallery-btn>Vybrat z galerie</button>
          </div>
          <div class="photo-actions-desktop">
            <button type="button" class="webapp-button primary" data-photo-desktop-btn>P≈ôipojit fotky</button>
          </div>
          <input type="file" accept="image/*" capture="environment" multiple class="webapp-hidden" data-photo-camera-input />
          <input type="file" accept="image/*" multiple class="webapp-hidden" data-photo-gallery-input />
          <input type="file" accept="image/*" multiple class="webapp-hidden" data-photo-desktop-input />
          <div class="webapp-muted" style="margin-top:6px;">Vybr√°no: <strong data-photo-count>0/5</strong></div>
          <div class="photo-strip" data-photo-preview></div>
        </div>

        <div>
          <label class="label">Popis (voliteln√©)</label>
          <input class="input" type="text" maxlength="50" placeholder="Nap≈ô. zapomenut√Ω telefon" data-description />
          <div class="webapp-muted">Poƒçet znak≈Ø: <strong data-desc-count>0/50</strong></div>
        </div>

        <div>
          <label class="label">Pokoj</label>
          <div class="room-grid" data-room-grid>
            {% for room in rooms %}
            <button type="button" class="room-tile" data-room="{{ room }}">{{ room }}</button>
            {% endfor %}
          </div>
        </div>

        <div class="webapp-actions">
          <button class="webapp-button primary" type="submit">Odeslat hl√°≈°en√≠</button>
          <button class="webapp-button ghost" type="button" onclick="window.location.reload()">Resetovat</button>
        </div>
      </form>
    {% elif role_key == 'breakfast' %}
    <h2 style="font-size:22px;text-transform:uppercase;letter-spacing:0.05em;">P≈ôehled sn√≠dan√≠</h2>
    <p class="webapp-muted">V√Ωpis pokoj≈Ø s objednanou sn√≠dan√≠. Oznaƒçte hosty, kte≈ô√≠ na sn√≠dani dorazili.</p>
    <div class="webapp-card" style="margin-top: 12px;">
      <div class="webapp-card-head">
        <div>
          <div class="webapp-card-title">P≈ôehled sn√≠dan√≠</div>
          <div class="webapp-muted" data-breakfast-status-text>Naƒç√≠t√°m...</div>
        </div>
        <div class="webapp-actions">
          <button class="webapp-button" type="button" data-breakfast-prev>‚óÄ</button>
          <div class="webapp-pill" data-breakfast-date style="min-width: 140px; text-align:center;"></div>
          <button class="webapp-button" type="button" data-breakfast-next>‚ñ∂</button>
        </div>
      </div>
      <div class="breakfast-list" data-breakfast-list></div>
    </div>
    {% elif role_key == 'frontdesk' %}
    <h2 style="font-size:22px;text-transform:uppercase;letter-spacing:0.05em;">Ztr√°ty a n√°lezy</h2>
    <p class="webapp-muted">Seznam n√°lez≈Ø ƒçekaj√≠c√≠ch na vy≈ô√≠zen√≠ recepc√≠.</p>
    <div class="webapp-actions">
      <button class="webapp-button ghost" type="button" data-refresh-reports>Aktualizovat</button>
      </div>
      <div class="report-list" data-report-list></div>
      {% elif role_key == 'maintenance' %}
      <h2 style="font-size:22px;text-transform:uppercase;letter-spacing:0.05em;">Otev≈ôen√© z√°vady</h2>
      <p class="webapp-muted">Seznam z√°vad ƒçekaj√≠c√≠ch na vy≈ô√≠zen√≠ √∫dr≈æbou.</p>
      <div class="webapp-actions">
        <button class="webapp-button ghost" type="button" data-refresh-reports>Aktualizovat</button>
      </div>
      <div class="report-list" data-report-list></div>
      {% endif %}
    </div>

    <footer class="webapp-footer">
      <div class="webapp-card webapp-status-card">
        <div class="webapp-status-row">
          <div class="webapp-status-meta">
            <span class="status-pill" data-status-pill data-status="UNKNOWN">Naƒç√≠t√°m</span>
            <div class="webapp-muted" data-status-text></div>
          </div>
          <div class="webapp-status-id">
            <span>Device ID:</span>
            <strong data-device-id>‚Äî</strong>
          </div>
        </div>
        <div class="webapp-note" data-activation-note>
          Za≈ô√≠zen√≠ ƒçek√° na aktivaci. Po≈æ√°dejte administr√°tora o povolen√≠ za≈ô√≠zen√≠ v administraci Hotelu.
        </div>
        <div class="webapp-note webapp-hidden" data-error-box></div>
        <div class="webapp-note webapp-hidden" data-success-box></div>
      </div>
    </footer>
  </div>
</div>
{% endblock %}
