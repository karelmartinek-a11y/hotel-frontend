{% extends "base.html" %}

{% block title %}Hotel App – Nastavení hesla{% endblock %}

{% block head_extra %}
  <link rel="stylesheet" href="/static/hotel-webapp.css" />
{% endblock %}

{% block content %}
<div style="min-height:100vh;display:grid;place-items:center;padding:24px;background:linear-gradient(180deg, #e0f2ff 0%, #f8fbff 40%, #ffffff 100%);">
  <div class="card pad" style="width:min(520px,100%);box-shadow:var(--shadow-2);">
    <div style="display:flex;gap:12px;align-items:center;margin-bottom:14px;">
      <img src="{{ url_for('static', path='brand/icon.png') }}" alt="ASC Hotel Chodov" style="width:48px;height:48px;border-radius:14px;background:#e0f2fe;padding:8px;border:1px solid #bae6fd;" loading="eager" decoding="async" />
      <div style="min-width:0;">
        <div style="font-size:18px;font-weight:850;">Nastavení nebo změna hesla</div>
        <div style="font-size:13px;color:var(--muted);">Platnost odkazu 24 hodin.</div>
      </div>
    </div>

    {% if error %}
      <div style="border:1px solid rgba(239,68,68,0.35);background:rgba(239,68,68,0.08);border-radius:12px;padding:12px;color:#b91c1c;margin-bottom:12px;font-size:13px;">
        {{ error }}
      </div>
    {% endif %}

    {% if success %}
      <div style="border:1px solid rgba(16,185,129,0.35);background:rgba(16,185,129,0.1);border-radius:12px;padding:12px;color:#047857;margin-bottom:12px;font-size:13px;">
        {{ success }}
      </div>
      <a class="btn solid" href="/app/login" style="width:100%;justify-content:center;display:inline-flex;">Přihlásit se</a>
    {% else %}
      <form method="post" action="/app/password/reset" class="stack" style="gap:12px;" autocomplete="off">
        <input type="hidden" name="token" value="{{ token }}" />
        <div>
          <div class="label">Nové heslo</div>
          <input
            type="password"
            name="password"
            required
            minlength="8"
            class="input"
            placeholder="Zadejte nové heslo"
            autocomplete="new-password"
          />
        </div>
        <button type="submit" class="btn solid" style="width:100%;justify-content:center;">Uložit heslo</button>
      </form>
    {% endif %}
  </div>
</div>
{% endblock %}
