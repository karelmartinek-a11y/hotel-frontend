{% extends "base.html" %}

{% block title %}ASC Hotel Chodov ‚Äî Dashboard{% endblock %}

{% block head_extra %}
<style>
  :root {
    --brand-1: #0ea5e9;
    --brand-2: #38bdf8;
    --brand-3: #7dd3fc;
  }
</style>
{% endblock %}

{% block content %}
<div class="page">
  <div class="container admin-shell">
    {% include "admin_sidebar.html" %}

    <main class="admin-main">
      <div class="stack" style="gap:14px;">
        <div class="card pad" style="display:flex;gap:12px;align-items:center;border:1px solid rgba(14,165,233,0.25);background:linear-gradient(90deg,#e0f2fe,#ffffff);">
          <div style="flex:1;display:grid;gap:4px;">
            <div style="font-weight:800;">Hotel Admin pro Android</div>
            <div style="color:var(--muted);font-size:13px;">APK pro recepci/√∫dr≈æbu. P≈ôihl√°≈°en√≠ je p≈ôes aktivovan√© za≈ô√≠zen√≠, bez hesla.</div>
          </div>
          <a class="btn solid" href="/download/adminhcasc.apk" download style="white-space:nowrap;">üì• St√°hnout APK</a>
        </div>

        <div class="row" style="justify-content:space-between;align-items:flex-end;flex-wrap:wrap;">
          <div style="display:flex;flex-direction:column;gap:6px;">
            <div style="font-size:20px;font-weight:850;">Dashboard</div>
            <div style="color:var(--muted);">P≈ôehled hl√°≈°en√≠ a stavu za≈ô√≠zen√≠.</div>
          </div>
          <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:flex-end;">
            <a href="/admin/reports/findings" class="btn">Ztr√°ty a n√°lezy</a>
            <a href="/admin/reports/issues" class="btn">Z√°vady</a>
            <a href="/admin/devices" class="btn solid">Za≈ô√≠zen√≠</a>
          </div>
        </div>

        <div class="card pad" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px;">
          <div class="card pad" style="background:linear-gradient(180deg,#e0f2fe,#ffffff);border-color:#bae6fd;">
            <div style="display:flex;justify-content:space-between;align-items:center;">
              <div>
                <div style="font-size:13px;color:var(--muted);">Otev≈ôen√© n√°lezy</div>
                <div style="font-size:28px;font-weight:800;margin-top:4px;">{{ stats.open_finds }}</div>
              </div>
              <span class="badge" style="background:#e0f2fe;border-color:#bae6fd;">FIND</span>
            </div>
            <div style="margin-top:8px;color:var(--muted);font-size:12px;">Posledn√≠ aktualizace: {{ stats.generated_at_human }}</div>
          </div>

          <div class="card pad" style="background:linear-gradient(180deg,#fef3c7,#ffffff);border-color:#fde68a;">
            <div style="display:flex;justify-content:space-between;align-items:center;">
              <div>
                <div style="font-size:13px;color:var(--muted);">Otev≈ôen√© z√°vady</div>
                <div style="font-size:28px;font-weight:800;margin-top:4px;">{{ stats.open_issues }}</div>
              </div>
              <span class="badge" style="background:#fef3c7;border-color:#fde68a;">ISSUE</span>
            </div>
            <div style="margin-top:8px;color:var(--muted);font-size:12px;">Posledn√≠ aktualizace: {{ stats.generated_at_human }}</div>
          </div>

          <div class="card pad" style="background:linear-gradient(180deg,#ecfeff,#ffffff);border-color:#bae6fd;">
            <div style="display:flex;justify-content:space-between;align-items:center;">
              <div>
                <div style="font-size:13px;color:var(--muted);">Za≈ô√≠zen√≠ ke schv√°len√≠</div>
                <div style="font-size:28px;font-weight:800;margin-top:4px;">{{ stats.pending_devices }}</div>
              </div>
              <span class="badge pending"><span class="b-dot" aria-hidden="true"></span><span>Pending</span></span>
            </div>
            <div style="margin-top:8px;color:var(--muted);font-size:12px;">Posledn√≠ aktualizace: {{ stats.generated_at_human }}</div>
          </div>
        </div>

        <div class="card pad" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px;">
          <div>
            <div style="font-weight:800;">Rychl√© akce</div>
            <div style="margin-top:10px;display:grid;gap:10px;">
              <a href="/admin/reports/findings?status=OPEN" class="btn">Otev≈ôen√© n√°lezy</a>
              <a href="/admin/reports/issues?status=OPEN" class="btn">Otev≈ôen√© z√°vady</a>
              <a href="/admin/reports?status=DONE" class="btn">Vy≈ô√≠zen√© (DONE)</a>
              <a href="/admin/devices" class="btn solid">Za≈ô√≠zen√≠</a>
            </div>
          </div>
          <div>
            <div style="font-weight:800;">Stav syst√©mu</div>
            <div style="margin-top:10px;display:grid;gap:10px;">
              <div class="card pad" style="display:flex;justify-content:space-between;align-items:center;">
                <div>
                  <div style="font-weight:700;">API</div>
                  <div style="color:var(--muted);font-size:12px;">{{ stats.api_base }}</div>
                </div>
                <span class="badge active"><span class="b-dot" aria-hidden="true"></span><span>OK</span></span>
              </div>
              <div class="card pad" style="display:flex;justify-content:space-between;align-items:center;">
                <div>
                  <div style="font-weight:700;">Datab√°ze</div>
                  <div style="color:var(--muted);font-size:12px;">PostgreSQL 15 (Docker)</div>
                </div>
                {% if stats.db_ok %}
                  <span class="badge active"><span class="b-dot" aria-hidden="true"></span><span>OK</span></span>
                {% else %}
                  <span class="badge revoked"><span class="b-dot" aria-hidden="true"></span><span>PROBL√âM</span></span>
                {% endif %}
              </div>
              <div class="card pad" style="display:flex;justify-content:space-between;align-items:center;">
                <div>
                  <div style="font-weight:700;">M√©dia</div>
                  <div style="color:var(--muted);font-size:12px;">/var/lib/hotelapp/media</div>
                </div>
                {% if stats.media_ok %}
                  <span class="badge active"><span class="b-dot" aria-hidden="true"></span><span>OK</span></span>
                {% else %}
                  <span class="badge revoked"><span class="b-dot" aria-hidden="true"></span><span>PROBL√âM</span></span>
                {% endif %}
              </div>
              <div class="card pad">
                <div style="font-weight:700;">Pozn√°mka</div>
                <div style="margin-top:6px;color:var(--muted);font-size:13px;">P≈ô√≠stup k fotografi√≠m je chr√°nƒõn admin session. Ve≈ôejnƒõ nejsou dostupn√©.</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
{% endblock %}
